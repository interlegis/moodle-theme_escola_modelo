{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template core/loginform

    Moodle template for the login page.

    Context variables required for this template:
    * autofocusform: Auto focus on form ?,
    * canloginasguest - Is guest login allowed?,
    * canloginbyemail - Is login by email allowed?,
    * cansignup - Signup allowed?,
    * cookieshelpicon - cookies help icon details
    * error - Any errors in the form?,
    * forgotpasswordurl - Forgot password url,
    * hasidentityproviders - Flag, set to true to hide identity providers,
    * hasinstructions - Flag, set to true to show instructions,
    * identityproviders - List of identiy providers,
    * instructions - Instructions,
    * instructionsformat - Format of instructions,
    * loginurl - Login url,
    * rememberusername - Remeber username?,
    * signupurl - Signup url,
    * cookieshelpiconformatted - Formatted html of cookies help icon,
    * errorformatted - Formatted error,
    * logourl - Flag, logo url,
    * sitename - Name of site.
    * logintoken - Random token to protect login request.

    Example context (json):
    {
        "autofocusform": false,
        "canloginasguest": "1",
        "canloginbyemail": false,
        "cansignup": true,
        "cookieshelpicon": {
            "heading": "Cookies must be enabled in your browser",
            "text": "<div class=\"no-overflow\">Two cookies are used on this site. Both died..</div>",
            "icon": {
                "attributes": [
                    {
                        "name": "class",
                        "value": "iconhelp"
                    },
                    {
                        "name": "alt",
                        "value": "Help with Cookies must be enabled in your browser"
                    },
                    {
                        "name": "title",
                        "value": "Help with Cookies must be enabled in your browser"
                    },
                    {
                        "name": "src",
                        "value": "http://localhost/stable_master/theme/image.php?theme=boost&component=core&image=help"
                    }
                ]
            },
            "linktext": null,
            "title": "Help with Cookies must be enabled in your browser",
            "url": "http://localhost/stable_master/help.php?component=core&identifier=cookiesenabled&lang=en",
            "ltr": true
        },
        "error": "",
        "forgotpasswordurl": "http://localhost/stable_master/login/forgot_password.php",
        "hasidentityproviders": false,
        "hasinstructions": true,
        "identityproviders": [],
        "instructions": "For full access to this site, you first need to create an account.",
        "instructionsformat": "1",
        "loginurl": "http://localhost/stable_master/login/index.php",
        "rememberusername": true,
        "signupurl": "http://localhost/stable_master/login/signup.php",
        "cookieshelpiconformatted": "",
        "errorformatted": "",
        "logourl": false,
        "sitename": "Beer & Chips",
        "logintoken": "randomstring"
    }
}}


    <link rel="stylesheet" type="text/css" href="../theme/escola_modelo/style/login.css">
    <script src="../theme/escola_modelo/js/login.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
    {{! 
    FIXME quebra formatação do header ao habilitar
    <link rel="stylesheet" href="https://unpkg.com/bootstrap-material-design@4.1.1/dist/css/bootstrap-material-design.min.css" integrity="sha384-wXznGJNEXNG1NFsbm0ugrLFMQPWswR3lds2VeinahP8N0zJw9VWSopbjv2x7WCvX" crossorigin="anonymous">
     }}
    {{! 
    FIXME parecem já ser incluídas no head do tema
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    
     }}

    <section class="login-block">
      <div class="container">
        <div class="row">
          <div class="col-md-4">
            <div class="divLogoProperties">
                {{#logourl}}
                    <!--<h2 class="card-header text-center" ><img src="{{logourl}}" class="img-fluid" title="{{sitename}}" alt="{{sitename}}"/></h2> -->
                    <img src="{{logourl}}" class="logoProperties">
                {{/logourl}}
                {{^logourl}}
                    <p class="card-header text-center">{{sitename}}</p>
                {{/logourl}}
            </div>
            <div class="accordion" id="accordionExample">
              
              {{#hasidentityproviders}}
              {{#identityproviders}}

              <div class="card colorLoginUser">
                <div class="card-header boxShadow" id="headingOne">
                  <h2 class="mb-0">
                    <a class="btn btn-link collapsed textDecorationProperties btn-block" data-toggle="collapse" data-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                      <i class="icon fa fa-university"></i>
                        Autenticação EVL
                    </a>
                  </h2>
                </div>
                <div id="collapseOne" class="collapse show colorLoginClear" aria-labelledby="headingOne" data-parent="#accordionExample">
                  <div class="card-body">
                    <button type="button" class="btn btn-interlegis btn-lg btn-block">
                        <img src="{{iconurl}}" style="width: 16px" id="imgLogin">
                          Autenticação EVL <!--{{name}} -->
                    </button>
                  </div>
                </div>
              </div>
              {{/identityproviders}}
              {{/hasidentityproviders}}                   


                <div class="card colorLoginAdm">
                  <div class="card-header boxShadow" id="headingTwo">
                    <h2 class="mb-0">
                      <a class="btn btn-link collapsed textDecorationProperties btn-block"data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                        <i class="icon fa fa-cogs"></i>
                      Login Administrador
                      </a>
                    </h2>
                  </div>
                  
                  <div id="collapseTwo" class="collapse colorLoginClear" aria-labelledby="headingTwo" data-parent="#accordionExample">
                    
                    
                    <div class="card-body">
                    {{#error}}
                        <!-- FIXME melhorar erro de login (ativar seção em caso de erro) -->
                        <div class="loginerrors mt-3">
                            <a href="#" id="loginerrormessage" class="accesshide">{{error}}</a>
                            <div class="alert alert-danger" role="alert" data-aria-autofocus="true">{{error}}</div>
                        </div>
                    {{/error}}
                      <form class="login-form" action="{{loginurl}}" method="post" id="login">
                        <input id="anchor" type="hidden" name="anchor" value="">
                        <script>document.getElementById('anchor').value = location.hash;</script>
                        <input type="hidden" name="logintoken" value="{{logintoken}}">

                        <div class="form-group">
                          <input type="text" name="username" id="username" class="form-control" 
                            placeholder={{#quote}}{{^canloginbyemail}}{{#str}}username{{/str}}{{/canloginbyemail}}{{#canloginbyemail}}{{#str}}usernameemail{{/str}}{{/canloginbyemail}}{{/quote}}
                            autocomplete="username" value="{{username}}">
                        </div>
                        <div class="form-group">
                          <input type="password" id="password" name="password" class="form-control" placeholder="{{#str}} password {{/str}}" autocomplete="current-password">
                        </div>

                        <p><a href="{{forgotpasswordurl}}">{{#str}}forgotten{{/str}}</a></p>

                        {{#rememberusername}}
                            <div class="form-check">
                              <label class="form-check-label">
                                <input type="checkbox" name="rememberusername" id="rememberusername" value="1" {{#username}}checked="checked"{{/username}} />
                                <small for="rememberusername">{{#str}} rememberusername, admin {{/str}}</small>
                                
                                {{! TODO ver alguma forma de mostrar tooltip abaixo
                                    <span class="tooltiptext">{{#str} cookiesenabled {{/str}</span>
                                 }}
                              </label>
                               
                            </div>
                        {{/rememberusername}}
                        <button type="submit" id="loginbtn" class="btn btn-login float-right">Entrar</button>
                      </form>
                    </div>


                  </div>


                </div>
                {{#canloginasguest}}
                  <div class="card colorLoginAdm">

                        <div class="card-header boxShadow" id="headingThree">
                            <h2 class="mb-0">
                                <a class="btn btn-link collapsed textDecorationProperties btn-block" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                <i class="icon fa fa-user-secret"></i>
                                Acessar Como Visitante
                                </a>
                            </h2>
                        </div>
                        <div id="collapseThree" class="collapse colorLoginClear" aria-labelledby="headingThree" data-parent="#accordionExample">
                            <form action="{{loginurl}}" method="post" id="guestlogin">
                                <input type="hidden" name="logintoken" value="{{logintoken}}">
                                <input type="hidden" name="username" value="guest" />
                                <input type="hidden" name="password" value="guest" />

                                <div class="card-body">
                                    <button type="submit" class="btn btn-guest btn-lg btn-block"><img src="https://img.icons8.com/plasticine/100/000000/user.png"  style="width: 16px">{{#str}}loginguest{{/str}}</button>
                                </div>
                            </form>
                        </div>

                    <div class="card-header boxShadow" id="headingThree">
                    </div>
                  </div>
                {{/canloginasguest}}

                  <!--
                  <div class="card colorLoginAdm">
                    <div class="card-header boxShadow" id="headingFour">
                      <h2 class="mb-0">
                        <a class="btn btn-link collapsed textDecorationProperties btn-block" data-toggle="collapse" data-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                          <i class="icon fa fa-user"></i>
                            Login Usuário
                        </a>
                      </h2>
                    </div>
                    <div id="collapseFour" class="collapse colorLoginClear" aria-labelledby="headingFour" data-parent="#accordionExample">
                      <div class="card-body">     
                        <form class="login-form">
                          <div class="form-group">
                            <input type="text" class="form-control" placeholder="Usuário">
                          </div>
                          <div class="form-group">
                            <input type="password" class="form-control" placeholder="Senha">
                          </div>
                          <div class="form-check">
                            <label class="form-check-label">
                              <input type="checkbox" class="form-check-input">
                              <small>Lembrar</small>
                            </label>
                            <button type="submit" class="btn btn-login float-right">Entrar</button>
                          </div>
                        </form>
                      </div>
                    </div>
                  </div>
                  -->
                </div>
                <div class="divPoweredBy">
                  <a href="http://www.interlegis.leg.br/" style="text-decoration: none;"><p class="poweredBy">Interlegis - 2019 Copyright - All Rights Reserved Terms of Service</p></a>
                </div>               
              </div>
              <div class="col-md-8 banner-sec">
                <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                  <ol class="carousel-indicators">
                  <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                  <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                  <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                </ol>
                <div class="carousel-inner" role="listbox">
                  <div class="carousel-item active">
                    <img class="d-block img-fluid" src="https://images.pexels.com/photos/1925536/pexels-photo-1925536.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940"  style="min-height: 650px;" alt="First slide">
                    <div class="carousel-caption d-none d-md-block">
                      <div class="banner-text">
                        <h2>Os melhores cursos</h2>
                        <p>Cursos de capacitação voltados ao servidor.</p>
                      </div>  
                    </div>
                  </div>
                  <div class="carousel-item">
                    <img class="d-block img-fluid" src="https://images.pexels.com/photos/7102/notes-macbook-study-conference.jpg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940" style="min-height: 650px;" alt="First slide">
                    <div class="carousel-caption d-none d-md-block">
                      <div class="banner-text">
                        <h2>Facilidade de acesso</h2>
                        <p>Acesso facilitado para cumprimento onde quer que o servidor esteja.</p>
                      </div>  
                    </div>
                  </div>
                  <div class="carousel-item">
                    <img class="d-block img-fluid" src="https://images.pexels.com/photos/207700/pexels-photo-207700.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940" style="min-height: 650px;" alt="First slide">
                    <div class="carousel-caption d-none d-md-block">
                      <div class="banner-text">
                        <h2>Incentivo a atualização de conhecimentos</h2>
                        <p>Atualize-se e conheça novas áreas de conhecimento.</p>
                      </div>  
                    </div>
                  </div>
                </div>     
              </div>
            </div>
          </div>
      </section>

{{! 
TODO: verificar conveniência de link para criar nova conta

            {{#cansignup}
                <div class="sr-only">XXXXXXXXXXXXXXXXXXXXXXXXXXX
                    <a href="{{signupurl}">{{#str} tocreatenewaccount {{/str}</a>
                </div>
            {{/cansignup}
 }}


{{#js}}
    {{#error}}
        require(['jquery'], function($) {
            $('#loginerrormessage').focus();
        });
    {{/error}}
    {{^error}}
        {{#autofocusform}}
            require(['jquery'], function($) {
                if ($('#username').val()) {
                    $('#password').focus();
                } else {
                    $('#username').focus();
                }
            });
        {{/autofocusform}}
    {{/error}}
{{/js}}
